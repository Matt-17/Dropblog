@using Microsoft.AspNetCore.Components.Web

<div class="post-type-selector">
    <label class="selector-label">Choose post type:</label>
    <div class="type-grid">
        @foreach (var postType in PostTypes)
        {
            <label class="type-option @(SelectedType == postType.Value ? "selected" : "")" 
                   @onclick="@(() => SelectType(postType.Value))">
                <input type="radio" 
                       name="postType" 
                       value="@postType.Value" 
                       checked="@(SelectedType == postType.Value)" 
                       @onchange="@(() => SelectType(postType.Value))" />
                <div class="type-content">
                    <img src="@($"assets/images/icon-{postType.Value}.png")" 
                         alt="@postType.Text" 
                         class="type-icon" />
                    <span class="type-text">@postType.Text</span>
                </div>
            </label>
        }
    </div>
</div>

@code {
    [Parameter] public string SelectedType { get; set; } = "note";
    [Parameter] public EventCallback<string> SelectedTypeChanged { get; set; }

    private static readonly List<PostTypeOption> PostTypes = new()
    {
        new PostTypeOption("note", "Note"),
        new PostTypeOption("link", "Link"),
        new PostTypeOption("comment", "Comment"),
        new PostTypeOption("quote", "Quote"),
        new PostTypeOption("photo", "Photo"),
        new PostTypeOption("code", "Code"),
        new PostTypeOption("question", "Question"),
        new PostTypeOption("shopping", "Shopping"),
        new PostTypeOption("rant", "Rant"),
        new PostTypeOption("poll", "Poll"),
        new PostTypeOption("media", "Media"),
        new PostTypeOption("book", "Book"),
        new PostTypeOption("announcement", "Announcement"),
        new PostTypeOption("calendar", "Calendar")
    };

    private async Task SelectType(string type)
    {
        SelectedType = type;
        await SelectedTypeChanged.InvokeAsync(type);
    }

    private record PostTypeOption(string Value, string Text);
} 